<beans xmlns="http://www.springframework.org/schema/beans"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:aop="http://www.springframework.org/schema/aop"
	xmlns:context="http://www.springframework.org/schema/context"
	xsi:schemaLocation="http://www.springframework.org/schema/beans 
			http://www.springframework.org/schema/beans/spring-beans.xsd
			http://www.springframework.org/schema/aop 
			http://www.springframework.org/schema/aop/spring-aop.xsd
			http://www.springframework.org/schema/context
			http://www.springframework.org/schema/context/spring-context.xsd">


	<!-- 下面使用的标签，context，bean，aop其实都有对应的命名空间的，在上面的xmlns中都有命名空间对你的地址'
		如context的命名空间为

	-->

	<context:component-scan
		base-package="org.litespring.service.v5,org.litespring.dao.v5">
	</context:component-scan>

	<bean id="tx" class="org.litespring.tx.TransactionManager" />



	<aop:config>
		
		<aop:aspect ref="tx"> <!-- AspectInstanceFactory表示 -->

			<aop:pointcut id="placeOrder"
				expression="execution(* org.litespring.service.v5.*.placeOrder(..))" /> <!-- AspcetJExpressionPointCut表示 -->
			
			<aop:before pointcut-ref="placeOrder" method="start" /> <!-- AspectJBeforeAdvice表示，其中它持有了 MethodLocatingFactory(用来获取start表示的方法)，AspectInstanceFactory(配合MethodLocationFactory的调用)，AspectJExpressionPointCut(用来确定这个advice绑定的pointcut，也就是这个advice的使用范围) -->
			<aop:after-returning pointcut-ref="placeOrder"	method="commit" />	
			<aop:after-throwing pointcut-ref="placeOrder" method = "rollback"/>
					
			
		</aop:aspect>

	</aop:config>

</beans>